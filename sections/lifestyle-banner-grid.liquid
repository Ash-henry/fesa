<div class="color-{{ section.settings.color_scheme }} lifestyle-banner-grid-{{ section.id }}">
    <div class="lifestyle-banner-container">
        {% if section.settings.heading != blank %}
            <div class="lifestyle-banner-header">
                <h2>{{ section.settings.heading }}</h2>
                {% if section.settings.subheading != blank %}
                    <p>{{ section.settings.subheading }}</p>
                {% endif %}
            </div>
        {% endif %}

        <div class="lifestyle-banner-grid layout-{{ section.settings.layout_type }}">
            {% for block in section.blocks %}
                <div class="lifestyle-banner-item" {{ block.shopify_attributes }}>
                    <!-- Added video support alongside image support -->
                    {% if block.settings.video != blank %}
                        <div class="banner-image-wrapper">
                            <video
                                    class="banner-video"
                                    autoplay
                                    loop
                                    muted
                                    playsinline
                            >
                                {% for source in block.settings.video.sources %}
                                    <source src="{{ source.url }}" type="{{ source.mime_type }}">
                                {% endfor %}
                            </video>

                            {% if block.settings.overlay_opacity > 0 %}
                                <div class="banner-overlay" style="opacity: {{ block.settings.overlay_opacity | divided_by: 100.0 }};"></div>
                            {% endif %}

                            <div class="banner-content">
                                {% if block.settings.caption != blank %}
                                    <h3 class="banner-caption">{{ block.settings.caption }}</h3>
                                {% endif %}

                                {% if block.settings.description != blank %}
                                    <p class="banner-description">{{ block.settings.description }}</p>
                                {% endif %}

                                {% if block.settings.cta_text != blank and block.settings.cta_link != blank %}
                                    <a href="{{ block.settings.cta_link }}" class="banner-cta">
                                        {{ block.settings.cta_text }}
                                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                            <path d="M6 3L11 8L6 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                                    </a>
                                {% endif %}
                            </div>
                        </div>
                    {% elsif block.settings.image != blank %}
                        <div class="banner-image-wrapper">
                            <img
                                    src="{{ block.settings.image | image_url: width: 1200 }}"
                                    srcset="{{ block.settings.image | image_url: width: 400 }} 400w,
                        {{ block.settings.image | image_url: width: 800 }} 800w,
                        {{ block.settings.image | image_url: width: 1200 }} 1200w"
                                    sizes="(max-width: 768px) 100vw, 50vw"
                                    alt="{{ block.settings.image.alt | escape }}"
                                    loading="lazy"
                                    class="banner-image"
                            >

                            {% if block.settings.overlay_opacity > 0 %}
                                <div class="banner-overlay" style="opacity: {{ block.settings.overlay_opacity | divided_by: 100.0 }};"></div>
                            {% endif %}

                            <div class="banner-content">
                                {% if block.settings.caption != blank %}
                                    <h3 class="banner-caption">{{ block.settings.caption }}</h3>
                                {% endif %}

                                {% if block.settings.description != blank %}
                                    <p class="banner-description">{{ block.settings.description }}</p>
                                {% endif %}

                                {% if block.settings.cta_text != blank and block.settings.cta_link != blank %}
                                    <a href="{{ block.settings.cta_link }}" class="banner-cta">
                                        {{ block.settings.cta_text }}
                                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                                            <path d="M6 3L11 8L6 13" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                                    </a>
                                {% endif %}
                            </div>
                        </div>
                    {% else %}
                        <div class="banner-placeholder">
                            <svg width="80" height="80" viewBox="0 0 80 80" fill="none">
                                <rect width="80" height="80" fill="currentColor" opacity="0.1"/>
                                <path d="M20 50L35 35L45 45L60 30" stroke="currentColor" opacity="0.3" stroke-width="2"/>
                            </svg>
                        </div>
                    {% endif %}
                </div>
            {% endfor %}
        </div>
    </div>
</div>

<style>
    .lifestyle-banner-grid-{{ section.id }} {
        padding: {{ section.settings.padding_top }}px 0 {{ section.settings.padding_bottom }}px;
        /* Removed hardcoded background and color - now inherits from color-scheme class */
    }

    .lifestyle-banner-container {
        max-width: {{ section.settings.container_width }}px;
        margin: 0 auto;
        padding: 0 20px;
    }

    .lifestyle-banner-header {
        text-align: center;
        margin-bottom: 48px;
    }

    .lifestyle-banner-header h2 {
        font-size: {{ section.settings.heading_size }}px;
        font-weight: 600;
        margin: 0 0 12px 0;
        /* Removed hardcoded color to inherit from color scheme */
    }

    .lifestyle-banner-header p {
        font-size: 18px;
        /* Removed hardcoded color to inherit from color scheme */
        opacity: 0.7;
        max-width: 600px;
        margin: 0 auto;
    }

    .lifestyle-banner-grid {
        display: grid;
        gap: {{ section.settings.grid_gap }}px;
    }

    /* 2-Column Layout */
    .lifestyle-banner-grid.layout-two-column {
        grid-template-columns: repeat(2, 1fr);
    }

    /* 3-Grid Layout */
    .lifestyle-banner-grid.layout-three-grid {
        grid-template-columns: repeat(3, 1fr);
    }

    /* Mosaic Layout */
    .lifestyle-banner-grid.layout-mosaic {
        grid-template-columns: repeat(4, 1fr);
        grid-auto-rows: 300px;
    }

    .lifestyle-banner-grid.layout-mosaic .lifestyle-banner-item:nth-child(1) {
        grid-column: span 2;
        grid-row: span 2;
    }

    .lifestyle-banner-grid.layout-mosaic .lifestyle-banner-item:nth-child(2) {
        grid-column: span 2;
    }

    .lifestyle-banner-grid.layout-mosaic .lifestyle-banner-item:nth-child(3) {
        grid-column: span 2;
    }

    .lifestyle-banner-grid.layout-mosaic .lifestyle-banner-item:nth-child(4) {
        grid-column: span 2;
        grid-row: span 2;
    }

    .lifestyle-banner-grid.layout-mosaic .lifestyle-banner-item:nth-child(5) {
        grid-column: span 2;
    }

    .lifestyle-banner-item {
        position: relative;
        overflow: hidden;
        border-radius: {{ section.settings.border_radius }}px;
        min-height: 400px;
    }

    .banner-image-wrapper {
        position: relative;
        width: 100%;
        height: 100%;
        overflow: hidden;
    }

    .banner-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    }

    /* Added video styling with same behavior as images */
    .banner-video {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .lifestyle-banner-item:hover .banner-image,
    .lifestyle-banner-item:hover .banner-video {
        transform: scale(1.05);
    }

    .banner-overlay {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.4);
        z-index: 1;
    }

    .banner-content {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        padding: 32px;
        z-index: 2;
        background: linear-gradient(to top, rgba(0,0,0,0.7) 0%, transparent 100%);
        color: white;
    }

    .banner-caption {
        font-size: {{ section.settings.caption_size }}px;
        font-weight: 600;
        margin: 0 0 8px 0;
        color: white;
    }

    .banner-description {
        font-size: 16px;
        line-height: 1.6;
        margin: 0 0 16px 0;
        color: rgba(255,255,255,0.9);
    }

    .banner-cta {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        color: white;
        text-decoration: none;
        font-weight: 500;
        font-size: 14px;
        padding: 12px 24px;
        background: rgba(255,255,255,0.15);
        backdrop-filter: blur(10px);
        border-radius: 8px;
        border: 1px solid rgba(255,255,255,0.2);
        transition: all 0.3s ease;
    }

    .banner-cta:hover {
        background: rgba(255,255,255,0.25);
        transform: translateX(4px);
    }

    .banner-cta svg {
        transition: transform 0.3s ease;
    }

    .banner-cta:hover svg {
        transform: translateX(4px);
    }

    .banner-placeholder {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100%;
        height: 100%;
        /* Removed hardcoded background and color - inherits from parent */
        opacity: 0.1;
    }

    .banner-placeholder svg {
        /* Removed hardcoded color */
        opacity: 0.3;
    }

    /* Responsive */
    @media (max-width: 1024px) {
        .lifestyle-banner-grid.layout-three-grid {
            grid-template-columns: repeat(2, 1fr);
        }

        .lifestyle-banner-grid.layout-mosaic {
            grid-template-columns: repeat(2, 1fr);
        }

        .lifestyle-banner-grid.layout-mosaic .lifestyle-banner-item {
            grid-column: span 1 !important;
            grid-row: span 1 !important;
        }
    }

    @media (max-width: 768px) {
        .lifestyle-banner-grid {
            grid-template-columns: 1fr !important;
        }

        .lifestyle-banner-grid.layout-mosaic .lifestyle-banner-item {
            grid-column: span 1 !important;
            grid-row: span 1 !important;
        }

        .lifestyle-banner-item {
            min-height: 300px;
        }

        .banner-content {
            padding: 24px;
        }

        .lifestyle-banner-header {
            margin-bottom: 32px;
        }

        .lifestyle-banner-header h2 {
            font-size: {{ section.settings.heading_size | times: 0.7 }}px;
        }
    }
</style>

{% schema %}
{
  "name": "Lifestyle Banner Grid",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Explore Our Collection"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading",
      "default": "Curated lifestyle moments"
    },
    {
      "type": "range",
      "id": "heading_size",
      "min": 24,
      "max": 72,
      "step": 2,
      "unit": "px",
      "label": "Heading Size",
      "default": 48
    },
    {
      "type": "select",
      "id": "layout_type",
      "label": "Layout Type",
      "options": [
        {
          "value": "two-column",
          "label": "2-Column"
        },
        {
          "value": "three-grid",
          "label": "3-Grid"
        },
        {
          "value": "mosaic",
          "label": "Mosaic"
        }
      ],
      "default": "mosaic"
    },
    {
      "type": "range",
      "id": "grid_gap",
      "min": 0,
      "max": 50,
      "step": 5,
      "unit": "px",
      "label": "Grid Gap",
      "default": 20
    },
    {
      "type": "range",
      "id": "border_radius",
      "min": 0,
      "max": 30,
      "step": 2,
      "unit": "px",
      "label": "Border Radius",
      "default": 12
    },
    {
      "type": "range",
      "id": "caption_size",
      "min": 18,
      "max": 48,
      "step": 2,
      "unit": "px",
      "label": "Caption Size",
      "default": 28
    },
    {
      "type": "range",
      "id": "container_width",
      "min": 1000,
      "max": 1600,
      "step": 100,
      "unit": "px",
      "label": "Container Width",
      "default": 1400
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 200,
      "step": 10,
      "unit": "px",
      "label": "Top Padding",
      "default": 60
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 200,
      "step": 10,
      "unit": "px",
      "label": "Bottom Padding",
      "default": 60
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color Scheme",
      "default": "scheme-1"
    }
  ],
  "blocks": [
    {
      "type": "banner",
      "name": "Banner Item",
      "settings": [
        {
          "type": "video",
          "id": "video",
          "label": "Video (Optional)"
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image (if no video)"
        },
        {
          "type": "range",
          "id": "overlay_opacity",
          "min": 0,
          "max": 80,
          "step": 5,
          "unit": "%",
          "label": "Overlay Opacity",
          "default": 0
        },
        {
          "type": "text",
          "id": "caption",
          "label": "Caption",
          "default": "Lifestyle Moment"
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "Description",
          "default": "Discover our latest collection"
        },
        {
          "type": "text",
          "id": "cta_text",
          "label": "CTA Text",
          "default": "Shop Now"
        },
        {
          "type": "url",
          "id": "cta_link",
          "label": "CTA Link"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Lifestyle Banner Grid",
      "blocks": [
        {
          "type": "banner"
        },
        {
          "type": "banner"
        },
        {
          "type": "banner"
        },
        {
          "type": "banner"
        }
      ]
    }
  ]
}
{% endschema %}
